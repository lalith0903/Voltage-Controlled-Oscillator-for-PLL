# Voltage-Controlled-Oscillator-for-PLL

This is repository presents the design of Voltage Controlled Oscillator for PLL using Synopsys Custom Compiler on 28nm Technology.

## Table Of Content:

- [Introduction](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#introduction)
- [Tools Used](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#tools-used)
- [Pre-Layout of Schematic of VCO](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#pre-layout-schematics-of-vco)
- [Stimulation](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#stimulation)
- [Netlist](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#netlist)
- [Acknowledgement](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#acknowledgement)
- [References](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#references)
- [Author](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/README.md#author)

## Introduction:

In VLSI System Design, Phase locked loop (PLL) can be widely used for data transmission systems and mobile communication systems. The PLL consists of five blocks: a phase frequency detector, a charge pump, a loop filter, a voltage-controlled oscillator and a frequency divider. Voltage-controlled oscillators are critical building blocks in phase-locked loop. Conventionally, there are several ways to implement the VCO: as an LC tuned oscillator, a relaxation oscillator (also called a multivibrator) and a ring oscillator. The LC tuned VCO occupies more area, and the tuning range is very narrow. Ring VCO provides a wide tuning range and less power consumption with less area. Among many types of Ring VCO, Current Starved VCO are used which offers a balance between power dissipation, area, phase noise and tuning range.  The general characteristic for VCOs used in PLL is wide tuning range so that the entire frequency range is covered. Also, the phase noise requirement of the VCO can be loosened due to that when the loop is locked, the noise generated by the VCO at the center of oscillation frequency will be filtered out by the loop bandwidth. As a result, PLLs generally use wide tuning range and noisier ring topology VCO. Hence can be used in space applications such as PLL.

### About VCO:

A voltage-controlled oscillator or VCO is an electronic oscillator designed for producing oscillation frequency by a controlled input voltage. The frequency of oscillation is varied by the applied controlled voltage. A VCO plays a vital role in communication system, providing a periodic signal required for digital circuit and also a frequency transmission in digital circuit. Their output frequency is a function of control input voltage. An ideal VCO is a circuit whose output frequency is a linear function of its control voltage. Most of the application as required a variable control input voltage as they required different frequency.

### Current Starved VCO:
 
A ring oscillator is comprised of a number of delay stages, with the output of the last stage fed back to the input of the first. This current starved VCO is designed using ring oscillator and its operation is also similar to that. From the schematic circuit it was observed that MOSFETs M1 and M2 operate as an inverter, while MOSFETs M13 and M14 operate as current sources. The current sources, M13 and M14, limit the current available to the inverter M1 and M2. In other words, the inverter is starved for the current. The MOSFETs M11 and M12 drain currents are the same and are set by input control voltage. The currents in M11 and M12 are mirrored in each inverter/current source stage. The upper PMOS transistors are connected to the gate of M11 and source voltage is applied to the gates of all low NMOS Transistors. The bias circuit is used to provide correct polarization for transistor M13 and M14. The benefit of this configuration is that the oscillation frequency can be tuned for a wide range by changing the value of control voltage.

<center>
<img src="https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/Images/VCO%20design.PNG">
<p align = "center"> CSVCO Circuit </p>
</center>

The oscillation frequency of the current-starved VCO for N of stages is given by
'''
Fosc=1/(N * (t1 + t2))
'''

total capacitance on the drains of M1 and M2 is given by 

'''
Ctot = Cout + Cin 
Ctot = Cox * (WpLp + WnLn)+ (3/2) * Cox * (WpLp + WnLn)
Ctot = (5/2) * Cox * (WpLp + WnLn)
Where, Cout and Cin represent the output and input capacitance of inverter respectively.
Wp and Wn are the widths of PMOS and NMOS respectively.
Lp and Ln are the lengths of PMOS and NMOS respectively.
Cox is the oxide capacitance of the transistor.
'''

t1 is the time it takes to charge Ctot from zero to Vsp with the constant current Id4 and t2 is the time it takes to discharge Ctot from VDD to Vsp which are given by 

'''
t1=Ctot*(Vsp/Id2) 
t2=Ctot*((Vdd-Vsp)/Id1)
Now, total time is given by (if Id1 = Id2)
t1 + t2 = Ctot * (Vdd/Id)
'''

Now frequency of oscillations will be

'''
Fosc=1/(N * Ctot * (Vdd/Id))
Where Ctot is total capacitance
Vdd is the Drain voltage of the circuit
Id is the drain current of the circuit
N is the Number of Stages 
'''

## Tools used:

- Synopsys Custom Compiler:
 The Synopsys Custom Compiler™ design environment is a modern solution for full-custom analog, custom digital, and mixed-signal IC design. As the heart of the Synopsys Custom Design Platform, Custom Compiler provides design entry, simulation management and analysis, and custom layout editing features. This tool was used to design the circuit on a transistor level.

- Synopsys Primewave:
 PrimeWave™ Design Environment is a comprehensive and flexible environment for simulation setup and analysis of analog, RF, mixed-signal design, custom-digital and memory designs within the Synopsys Custom Design Platform. This tool helped in various types of simulations of the above designed circuit.

- Synopsys 28nm PDK:
 The Synopsys 28nm Process Design Kit(PDK) was used in creation and simulation of the above designed circuit.

## Pre-Layout Schematics of VCO:

Initially Schematic of the VCO was implemented and converted into symbol so that it will be easier for stimulation process which is later used for PLL. 

<img align="center" src="https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/Images/Schematic%20of%20VCO.png">  
<p align="center"> Schematic of VCO </p>


<img align="center" src="https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/Images/Symbol%20of%20VCO.png"> 
<p align = "center"> Symbol of VCO </p>

## Stimulations:

### Transient Analysis:

For getting transient stimulation, create and save the schematic. Then click on ‘Tools’ and select on ‘Prime wave’, a new Testbench window will be open for stimulation. In this testbench, select ‘model file’ and browse for 28nm PDK’s.lib which is present in HSPICE folder. After doing this process, click on ‘Analysis’ an analysis window will be open. Select the ‘Tran’ in the window and give ‘Start’, ‘Stop’ and ‘Step Size’ and save it. Later select the nets in the schematic for which waveform is to be observed. Save the testbench and get the waveform i.e., select on ‘Stimulation’ and click on ‘Netlist and Run’. Also, we get the netlist for the circuit below.

<center>
 <img src="https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/Images/Wavefrom%20of%20VCO.png">
 <p align="center"> Stimulation of VCO </p>
</center>

## Netlists:

Refer to the netlist of the Voltage-Controlled-Oscillator for PLL here: [Netlist](https://github.com/lalith0903/Voltage-Controlled-Oscillator-for-PLL/blob/main/VCO_for_PLL.cir.out)

## Acknowledgements:

•	[Cloud Based Analog IC Design Hackathon](https://www.iith.ac.in/events/2022/02/15/Cloud-Based-Analog-IC-Design-Hackathon)

•	[Synopsys India](https://www.synopsys.com/)

•	[Kunal Ghosh, Co-founder](https://in.linkedin.com/in/kunal-ghosh-vlsisystemdesign-com-28084836), [VLSI System Design (VSD) Corp. Pvt. Ltd India](https://www.vlsisystemdesign.com/basic_courses/)

•	[Chinmay Panda, IIT Hyderabad](https://www.researchgate.net/profile/Chinmaya-Panda-6)

## References:

1.	Sandhiya.S, Revathi.S, Dr.B.Vinothkumar -  Design of Voltage Controlled Oscillator in 180 nm CMOS Technology Published by International Research Journal of Engineering and Technology (IRJET).
2.	Aswin Udayan Candice Darvin Fyna Francis Godwin Varghese - Design Of Digital Phase Locked Loop in 90nm CMOS Technology Published by Federal Institute of Science And Technology (FISAT). 
3.	Kuo-Hsing Cheng', Shu-Chang Kuo2, Chia-Ming Tu3 – A LOW NOISE, 2.0 GHz CMOS VCO DESIGN Published by IEEE Publication.

## Author

Balla Lalith Kumar, 
Gayatri Vidya Parishad College for Degree and PG Courses(A), 
Visakhapatnam-530045,
Andhra Pradesh.

E-MAIL_ID - lalithkumar97041@gmail.com
